<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>How to run intel fortran in a docker container on MacOS</title>


  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="css/scrolling-nav.css" rel="stylesheet">
  <style>
    h1 {margin: 5px}
    pre {background-color: #bbeca5;
        margin: 10px 20px;
        padding: 5px;}
  </style>

</head>

<body id="page-top">

<h1>How to run intel fortran on MacOS using docker containers</h1>
  <p>by <a href="https://andreamoro.net">Andrea Moro</a>, Vanderbilt University @andreamoro
  </p>
  <p> As far as I know, this is the only way to get intel fortran running on macOS. Since it took me a while to get things right, you may find the following useful</p>
  <h2>How to set up the container</h2>
  <ol>
    <li>
      Install Docker
    </li>
    <li>
      Create a basic intel oneapi fortran image (will take a few minutes)
      <pre> docker pull intel/oneapi-hpckit </pre>
    </li>
    <li> Run your first container
      <pre> docker run --name firstcontainer -it intel/oneapi-hpckit  </pre>
    </li>
    <li> Make changes you need to your container (e.g. customize .bash_profile, aliases, etc.. at your pleasure), for example,
      <pre>apt-get update</pre>
      <pre>apt-get install -y byobu curl git htop man unzip vim wget
      apt-get clean
      </pre>
      Since I make use of python I also need to
      <pre>pip install tornado
pip install --upgrade matplotlib  </pre>
Then, exit the container
    </li>
  <li> Create an image with your changes (named "myimage")
    <pre> docker commit firstcontainer myimage</pre>
  </li>
</ol>
  <h2> How to run a container mounting a local directory to the system</h2>
      <pre> docker run -it --name secondcontainer -v /path/to/directory/to/mount:/root/path/to/somewhere/inside/container myimage  </pre>

  <h2>How to "SSH" (not really, but good enough) into an existing container</h2>
  <pre>docker exec -it secondcon bash</pre>

  <h2>Other useful commands i keep forgetting</h2>
  <pre>docker container prune</pre>

  <p> Note: I recommend starting containers afresh and pruning them frequently. In my experience, things start to act funny after a while.
</body>

</html>
